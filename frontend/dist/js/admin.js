(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin"],{"0390":function(t,e,r){"use strict";var n=r("02f4")(!0);t.exports=function(t,e,r){return e+(r?n(t,e).length:1)}},"0bfb":function(t,e,r){"use strict";var n=r("cb7c");t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"214f":function(t,e,r){"use strict";r("b0c5");var n=r("2aba"),a=r("32e9"),i=r("79e5"),s=r("be13"),c=r("2b4c"),u=r("520a"),o=c("species"),l=!i(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),f=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();t.exports=function(t,e,r){var p=c(t),v=!i(function(){var e={};return e[p]=function(){return 7},7!=""[t](e)}),h=v?!i(function(){var e=!1,r=/a/;return r.exec=function(){return e=!0,null},"split"===t&&(r.constructor={},r.constructor[o]=function(){return r}),r[p](""),!e}):void 0;if(!v||!h||"replace"===t&&!l||"split"===t&&!f){var d=/./[p],b=r(s,p,""[t],function(t,e,r,n,a){return e.exec===u?v&&!a?{done:!0,value:d.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}}),g=b[0],m=b[1];n(String.prototype,t,g),a(RegExp.prototype,p,2==e?function(t,e){return m.call(t,this,e)}:function(t){return m.call(t,this)})}}},"520a":function(t,e,r){"use strict";var n=r("0bfb"),a=RegExp.prototype.exec,i=String.prototype.replace,s=a,c="lastIndex",u=function(){var t=/a/,e=/b*/g;return a.call(t,"a"),a.call(e,"a"),0!==t[c]||0!==e[c]}(),o=void 0!==/()??/.exec("")[1],l=u||o;l&&(s=function(t){var e,r,s,l,f=this;return o&&(r=new RegExp("^"+f.source+"$(?!\\s)",n.call(f))),u&&(e=f[c]),s=a.call(f,t),u&&s&&(f[c]=f.global?s.index+s[0].length:e),o&&s&&s.length>1&&i.call(s[0],r,function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(s[l]=void 0)}),s}),t.exports=s},"5f1b":function(t,e,r){"use strict";var n=r("23c6"),a=RegExp.prototype.exec;t.exports=function(t,e){var r=t.exec;if("function"===typeof r){var i=r.call(t,e);if("object"!==typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(t))throw new TypeError("RegExp#exec called on incompatible receiver");return a.call(t,e)}},"873c":function(t,e,r){"use strict";var n=r("b51d"),a=r.n(n);a.a},a481:function(t,e,r){"use strict";var n=r("cb7c"),a=r("4bf8"),i=r("9def"),s=r("4588"),c=r("0390"),u=r("5f1b"),o=Math.max,l=Math.min,f=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,v=/\$([$&`']|\d\d?)/g,h=function(t){return void 0===t?t:String(t)};r("214f")("replace",2,function(t,e,r,d){return[function(n,a){var i=t(this),s=void 0==n?void 0:n[e];return void 0!==s?s.call(n,i,a):r.call(String(i),n,a)},function(t,e){var a=d(r,t,this,e);if(a.done)return a.value;var f=n(t),p=String(this),v="function"===typeof e;v||(e=String(e));var g=f.global;if(g){var m=f.unicode;f.lastIndex=0}var _=[];while(1){var x=u(f,p);if(null===x)break;if(_.push(x),!g)break;var A=String(x[0]);""===A&&(f.lastIndex=c(p,i(f.lastIndex),m))}for(var y="",O=0,R=0;R<_.length;R++){x=_[R];for(var w=String(x[0]),E=o(l(s(x.index),p.length),0),S=[],k=1;k<x.length;k++)S.push(h(x[k]));var D=x.groups;if(v){var I=[w].concat(S,E,p);void 0!==D&&I.push(D);var j=String(e.apply(void 0,I))}else j=b(w,p,E,S,D,e);E>=O&&(y+=p.slice(O,E)+j,O=E+w.length)}return y+p.slice(O)}];function b(t,e,n,i,s,c){var u=n+t.length,o=i.length,l=v;return void 0!==s&&(s=a(s),l=p),r.call(c,l,function(r,a){var c;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(u);case"<":c=s[a.slice(1,-1)];break;default:var l=+a;if(0===l)return r;if(l>o){var p=f(l/10);return 0===p?r:p<=o?void 0===i[p-1]?a.charAt(1):i[p-1]+a.charAt(1):r}c=i[l-1]}return void 0===c?"":c})}})},b0c5:function(t,e,r){"use strict";var n=r("520a");r("5ca1")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},b51d:function(t,e,r){},ccf1:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.is_initialized?r("div",[t._l(t.eventStatuses,function(e){return r("div",{key:e.name,class:"control control-"+e.name},[r("h1",[t._v(t._s(t.EVENT_NAME_DIC[e.name]))]),r("h2",[t._v("最終更新: "+t._s(e.updateAtString))]),r("div",{staticClass:"inner"},[r("div",[r("select",{directives:[{name:"model",rawName:"v-model",value:e.statusString,expression:"json.statusString"}],on:{change:function(r){var n=Array.prototype.filter.call(r.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(e,"statusString",r.target.multiple?n:n[0])}}},t._l(t.getStatusOptions(e.name),function(e){return r("option",{key:e.value,domProps:{value:e.value}},[t._v(" "+t._s(e.text)+" ")])}),0),r("p",{staticClass:"btn btn-submit",on:{click:function(r){return t.submitStatus(e.name)}}},[r("span",[t._v("更新")])])]),t.results[e.name]?r("p",{staticClass:"result"},[t._v(t._s(t.results[e.name]))]):t._e()])])}),t.ALLMODE?r("div",{staticClass:"control control-ALL"},[r("h1",[t._v("一括操作")]),r("div",{staticClass:"inner"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.allValue,expression:"allValue"}],on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.allValue=e.target.multiple?r:r[0]}}},t._l(t.statusOptionsArrayCommon,function(e){return r("option",{key:e.value,domProps:{value:e.value}},[t._v(" "+t._s(e.text)+" ")])}),0),r("p",{staticClass:"btn btn-submit",on:{click:function(e){return t.allUpdate()}}},[r("span",[t._v("更新")])])]),t.results.ALL?r("p",{staticClass:"result"},[t._v(t._s(t.results.ALL))]):t._e()]):t._e()],2):t._e()},a=[],i=(r("8e6e"),r("456d"),r("a481"),r("bd86")),s=(r("ac6a"),r("5df3"),r("96cf"),r("3b8d")),c=r("2b0e"),u=r("5a0c"),o=r.n(u),l=r("205d"),f=r("0eb6"),p=r("f24a"),v=r("3bf0");function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(r,!0).forEach(function(e){Object(i["a"])(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var b=c["a"].extend({name:"UpdateStatus",data:function(){return{is_initialized:!1,busy_fetchData:!1,socket:null,target:this.$route.params.target,eventStatuses:{},results:{},allValue:v["i"][0],EVENT_NAME_DIC:v["h"]}},computed:{ALLMODE:function(){return"ALL"===this.target},REQUIRED_JSONID_ARRAY:function(){return"ALL"===this.target?[v["b"].CRUNCH,v["b"].FURIFURI,v["b"].ATHLETIC]:[this.target]},statusOptionsArray:function(){return v["k"]},statusOptionsArrayAthletic:function(){return v["k"].filter(function(t){return!/FURI_CRUNCH_/.test(t.value)})},statusOptionsArrayNotAthletic:function(){return v["k"].filter(function(t){return!/ATHLETIC_/.test(t.value)})},statusOptionsArrayCommon:function(){return v["k"].filter(function(t){return!/ATHLETIC_|FURI_CRUNCH_/.test(t.value)})}},created:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,r,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,this.$store.state.user.isAdmin){t.next=3;break}throw new Error("permission denied.");case 3:return t.next=5,new f["a"](this.REQUIRED_JSONID_ARRAY).fetchData();case 5:return e=t.sent,t.next=8,Promise.all([this.REQUIRED_JSONID_ARRAY.filter(function(t){return!e[t]}).map(function(t){return alert("".concat(t,"の情報が破損しているため再構築します。")),new Promise(function(r,n){Object(p["e"])(t).then(function(n){e[t]=n,r()}).catch(function(e){n(new Error("".concat(t,"の再構築に失敗しました ").concat(e.message)))})})})]);case 8:return this.eventStatuses=e,t.next=11,Object(l["a"])({dataTargetArray:this.REQUIRED_JSONID_ARRAY,jwt:this.$store.state.token});case 11:r=t.sent,r.on(v["d"].DATA_UPDATED,function(t){n.eventStatuses=d({},n.eventStatuses,{},t)}),this.socket=r,this.is_initialized=!0,t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](0),alert(t.t0.message),this.$router.replace({name:"home"});case 21:case"end":return t.stop()}},t,this,[[0,17]])}));function e(){return t.apply(this,arguments)}return e}(),methods:{getStatusOptions:function(t){return t===v["b"].ATHLETIC?this.statusOptionsArrayAthletic:this.statusOptionsArrayNotAthletic},submitStatus:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r="",t.prev=1,t.next=4,Object(p["h"])(this.eventStatuses[e]);case 4:r="更新しました: (".concat(o()().format("YYYY/MM/DD HH:mm:ss"),")"),t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](1),r="".concat(v["h"][e],"の更新に失敗しました: ").concat(t.t0.message),alert(r);case 11:return this.results=d({},this.results,Object(i["a"])({},e,r)),t.abrupt("return");case 13:case"end":return t.stop()}},t,this,[[1,7]])}));function e(e){return t.apply(this,arguments)}return e}(),allUpdate:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,r=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(window.confirm("一括更新を実行しますか？")){t.next=2;break}return t.abrupt("return");case 2:return e="",t.prev=3,t.next=6,Promise.all(this.REQUIRED_JSONID_ARRAY.map(function(t){return r.eventStatuses[t].statusString=r.allValue,r.submitStatus(t)}));case 6:e="一括更新を実行しました: (".concat(o()().format("YYYY/MM/DD HH:mm:ss"),")"),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](3),e="一括更新でエラーが発生しました: ".concat(t.t0.message),alert(e);case 13:return this.results=d({},this.results,{ALL:e}),t.abrupt("return");case 15:case"end":return t.stop()}},t,this,[[3,9]])}));function e(){return t.apply(this,arguments)}return e}()}}),g=b,m=(r("873c"),r("2877")),_=Object(m["a"])(g,n,a,!1,null,"7b694dc7",null);e["default"]=_.exports}}]);